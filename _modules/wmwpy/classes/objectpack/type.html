
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>wmwpy.classes.objectpack.type &#8212; wmwpy 0.5.2-beta documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css" />
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for wmwpy.classes.objectpack.type</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">typing</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">TYPE_CHECKING</span>
<span class="c1"># if TYPE_CHECKING:</span>
<span class="kn">from</span> <span class="nn">..object</span> <span class="kn">import</span> <span class="n">Object</span>
    
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>


<div class="viewcode-block" id="Type"><a class="viewcode-back" href="../../../../wmwpy.classes.objectpack.html#wmwpy.classes.objectpack.type.Type">[docs]</a><span class="k">class</span> <span class="nc">Type</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The Type class is an object used to modify an object image / properties on a case-by-case basis.</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">        NAME (str): The name of the Type property in objects that this is for.</span>
<span class="sd">        PROPERTIES (dict): All the default properties that this object type has.</span>
<span class="sd">    </span>
<span class="sd">    ## Defining the type</span>
<span class="sd">    To get started, the new type must inherit from the `Type` class. There are also a few contants that need to be defined.</span>
<span class="sd">    ```python</span>
<span class="sd">    from wmwpy.classes.objectpacks import Type</span>
<span class="sd">    </span>
<span class="sd">    class yswitch(Type):</span>
<span class="sd">        NAME = &#39;yswitch&#39;</span>
<span class="sd">        PROPERTIES = {</span>
<span class="sd">            &#39;YSwitchPosition&#39; : {</span>
<span class="sd">                &#39;type&#39; : &#39;bit&#39;,</span>
<span class="sd">                &#39;default&#39; : &#39;0&#39;,</span>
<span class="sd">            },</span>
<span class="sd">            &#39;ToggleSpriteIndex&#39; : {</span>
<span class="sd">                &#39;type&#39; : &#39;int&#39;,</span>
<span class="sd">                &#39;default&#39; : &#39;1&#39;,</span>
<span class="sd">            },</span>
<span class="sd">        }</span>
<span class="sd">    ```</span>
<span class="sd">    </span>
<span class="sd">    ## The `PROPERTIES` attribute</span>
<span class="sd">    </span>
<span class="sd">    The `PROPERTIES` attribute is a dictionary of the properties, which are also dictionaries containing the value type, default value, and options, if any. For example</span>
<span class="sd">    </span>
<span class="sd">    ```python</span>
<span class="sd">    PROPERTIES = {</span>
<span class="sd">        &quot;ExpulsionAngle&quot;: {</span>
<span class="sd">            &#39;type&#39; : &#39;float&#39;,</span>
<span class="sd">            &#39;default&#39; : &#39;0.0&#39;,</span>
<span class="sd">        },</span>
<span class="sd">        &quot;FluidType&quot;: {</span>
<span class="sd">            &#39;type&#39; : &#39;string&#39;,</span>
<span class="sd">            &#39;default&#39; : &#39;water&#39;,</span>
<span class="sd">            &#39;options&#39; : [</span>
<span class="sd">                &quot;water&quot;,</span>
<span class="sd">                &quot;contaminatedwater&quot;,</span>
<span class="sd">                &quot;lava&quot;,</span>
<span class="sd">                &quot;steam&quot;,</span>
<span class="sd">                &quot;mud&quot;,</span>
<span class="sd">                &quot;drymud&quot;,</span>
<span class="sd">                &quot;wetmud&quot;,</span>
<span class="sd">            ],</span>
<span class="sd">        },</span>
<span class="sd">    }</span>
<span class="sd">    ```</span>
<span class="sd">    </span>
<span class="sd">    The possible types are explained in `Type.value`.</span>
<span class="sd">    </span>
<span class="sd">    ## Getting the sprites ready</span>
<span class="sd">    </span>
<span class="sd">    After you&#39;ve defined the `NAME` and `PROPERTIES`, you can then get the sprites ready for the image.</span>
<span class="sd">    </span>
<span class="sd">    ```python</span>
<span class="sd">    class yswitch(Type):</span>
<span class="sd">        NAME = &#39;yswitch&#39;</span>
<span class="sd">        PROPERTIES = {</span>
<span class="sd">            &#39;YSwitchPosition&#39; : {</span>
<span class="sd">                &#39;type&#39; : &#39;bit&#39;,</span>
<span class="sd">                &#39;default&#39; : &#39;0&#39;,</span>
<span class="sd">            },</span>
<span class="sd">            &#39;ToggleSpriteIndex&#39; : {</span>
<span class="sd">                &#39;type&#39; : &#39;int&#39;,</span>
<span class="sd">                &#39;default&#39; : &#39;1&#39;,</span>
<span class="sd">            },</span>
<span class="sd">        }</span>

<span class="sd">        def ready_sprites(self):</span>
<span class="sd">            YSwitchPosition = self.get_property(&#39;YSwitchPosition&#39;)</span>
<span class="sd">            </span>
<span class="sd">            ToggleSpriteIndex = self.get_property(&#39;ToggleSpriteIndex&#39;)</span>
<span class="sd">            </span>
<span class="sd">            if YSwitchPosition != 1:</span>
<span class="sd">                YSwitchPosition = 0</span>
<span class="sd">            </span>
<span class="sd">            self.obj.sprites[ToggleSpriteIndex].angle = (360 / -3) * (YSwitchPosition + 1)</span>
<span class="sd">    ```</span>
<span class="sd">    </span>
<span class="sd">    The sprites and object is in a safe mode when this is called, meaning, you can modify the properties without worrying about them carrying onto the output xml.</span>
<span class="sd">    </span>
<span class="sd">    ## Required properties in the level xml</span>
<span class="sd">    </span>
<span class="sd">    If the object requires some properties to always be in the level xml, even if they are different from their default property, you can specify it.</span>
<span class="sd">    </span>
<span class="sd">    ```python</span>
<span class="sd">    from wmwpy.classes.objectpacks import Type</span>
<span class="sd">    </span>
<span class="sd">    class fluidconverter(Type):</span>
<span class="sd">        NAME = &#39;fluidconverter&#39;</span>
<span class="sd">        </span>
<span class="sd">        def ready_properties(self):</span>
<span class="sd">            return super().ready_properties(include = [</span>
<span class="sd">                &#39;FluidType&#39;,</span>
<span class="sd">                &#39;FluidType#&#39;,</span>
<span class="sd">                &#39;StartingFluidType&#39;,</span>
<span class="sd">                &#39;ConverterType&#39;,</span>
<span class="sd">            ])</span>
<span class="sd">    ```</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">NAME</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">PROPERTIES</span> <span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="s1">&#39;options&#39;</span><span class="p">],</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
    
    <span class="n">DEFAULT_PROPERTY</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span> <span class="p">:</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
        <span class="s1">&#39;default&#39;</span> <span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
    <span class="p">}</span>
    
    <span class="n">VALUE_TYPES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;float&#39;</span><span class="p">,</span> <span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="s1">&#39;bit&#39;</span><span class="p">,</span> <span class="s1">&#39;Vector2&#39;</span><span class="p">,</span> <span class="s1">&#39;Vector2,...&#39;</span><span class="p">]</span>
    
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span> <span class="p">:</span> <span class="s1">&#39;Object&#39;</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Object Type class.</span>

<span class="sd">        Args:</span>
<span class="sd">            obj (Object, optional): The object to be modified in this Type. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span>
    
<div class="viewcode-block" id="Type.split_property_num"><a class="viewcode-back" href="../../../../wmwpy.classes.objectpack.html#wmwpy.classes.objectpack.type.Type.split_property_num">[docs]</a>    <span class="k">def</span> <span class="nf">split_property_num</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">property</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Split a property name and number, such as, &#39;ConnectedSpout0&#39; returns `(&#39;ConnectedSpout&#39;, &#39;0&#39;)`.</span>

<span class="sd">        Args:</span>
<span class="sd">            string (str): Input property</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: Property must be str</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[str,str]: (name, number)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">property</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;property must be str&#39;</span><span class="p">)</span>
        
        <span class="n">head</span> <span class="o">=</span> <span class="nb">property</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;0123456789&#39;</span><span class="p">)</span>
        <span class="n">tail</span> <span class="o">=</span> <span class="nb">property</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">head</span><span class="p">):]</span>
        <span class="k">return</span> <span class="n">head</span><span class="p">,</span> <span class="n">tail</span></div>
    
<div class="viewcode-block" id="Type.ready_sprites"><a class="viewcode-back" href="../../../../wmwpy.classes.objectpack.html#wmwpy.classes.objectpack.type.Type.ready_sprites">[docs]</a>    <span class="k">def</span> <span class="nf">ready_sprites</span><span class="p">(</span><span class="bp">self</span><span class="p">,):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the sprites ready for generating the object image.</span>
<span class="sd">        </span>
<span class="sd">        In this method, you can modify any object or sprites properties to generate the correct image based on the object properties. There are also many methods that can be used to make the process easier.</span>
<span class="sd">        </span>
<span class="sd">        ```python</span>
<span class="sd">        from wmwpy.classes.objectpacks import Type</span>
<span class="sd">        </span>
<span class="sd">        class yswitch(Type):</span>
<span class="sd">            NAME = &#39;yswitch&#39;</span>
<span class="sd">        </span>
<span class="sd">            def ready_sprites(self):</span>
<span class="sd">                YSwitchPosition = self.get_property(&#39;YSwitchPosition&#39;)</span>
<span class="sd">        </span>
<span class="sd">                ToggleSpriteIndex = self.get_property(&#39;ToggleSpriteIndex&#39;)</span>
<span class="sd">                </span>
<span class="sd">                if YSwitchPosition != 1:</span>
<span class="sd">                    YSwitchPosition = 0</span>
<span class="sd">                </span>
<span class="sd">                self.obj.sprites[ToggleSpriteIndex].angle = (360 / -3) * (YSwitchPosition + 1)</span>
<span class="sd">        ```</span>
<span class="sd">        </span>
<span class="sd">        You can also modify sprite images directly.</span>
<span class="sd">        </span>
<span class="sd">        ```python</span>
<span class="sd">        from wmwpy.classes.objectpacks import Type</span>
<span class="sd">        from wmwpy.utils import imageprocessing</span>
<span class="sd">        </span>
<span class="sd">        class star(Type):</span>
<span class="sd">            NAME = &#39;star&#39;</span>
<span class="sd">        </span>
<span class="sd">            def ready_sprites(self):</span>
<span class="sd">                StarType = self.get_property(&#39;StarType&#39;).lower()</span>
<span class="sd">                </span>
<span class="sd">                if StarType == &#39;note&#39;:</span>
<span class="sd">                    color = tuple(self.get_property(&#39;Color&#39;))</span>
<span class="sd">                    </span>
<span class="sd">                    try:</span>
<span class="sd">                        self.obj.sprites[2].image = imageprocessing.recolor_image(</span>
<span class="sd">                            self.obj.sprites[2].image,</span>
<span class="sd">                            color</span>
<span class="sd">                        )</span>
<span class="sd">                    except:</span>
<span class="sd">                        pass</span>
<span class="sd">        ```</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>
    
<div class="viewcode-block" id="Type.value"><a class="viewcode-back" href="../../../../wmwpy.classes.objectpack.html#wmwpy.classes.objectpack.type.Type.value">[docs]</a>    <span class="k">def</span> <span class="nf">value</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">value</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">type</span> <span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Literal</span><span class="p">[</span>
            <span class="s1">&#39;string&#39;</span><span class="p">,</span>
            <span class="s1">&#39;float&#39;</span><span class="p">,</span>
            <span class="s1">&#39;int&#39;</span><span class="p">,</span>
            <span class="s1">&#39;bit&#39;</span><span class="p">,</span>
            <span class="s1">&#39;&lt;Vector&gt;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;&lt;Vector ...&gt;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;&lt;Vector,...&gt;&#39;</span><span class="p">,</span>
        <span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert this value from a string to a python build-in data type.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            value (str): The value</span>
<span class="sd">            type (Literal[&#39;string&#39;, &#39;float&#39;, &#39;int&#39;, &#39;bit&#39;, &#39;&lt;Vector&gt;&#39;, &#39;&lt;Vector ...&gt;&#39;, &#39;&lt;Vector,...&gt;&#39; ], optional): The value type. Defaults to &#39;string&#39;.</span>
<span class="sd">        </span>
<span class="sd">        - &#39;string&#39;</span>
<span class="sd">        - &#39;float&#39;</span>
<span class="sd">        - &#39;int&#39;</span>
<span class="sd">        - &#39;bit&#39; (0 or 1)</span>
<span class="sd">        - &#39;&lt;Vector&gt;&#39; (list of types seperated by spaces, e.g. &#39;string int&#39;)</span>
<span class="sd">        - &#39;&lt;Vector&gt; ...&#39; (list of retypes seperated by spaces, but also can be repeated, e.g. &#39;string int ...&#39;)</span>
<span class="sd">        - &#39;&lt;Vector&gt;,...&#39; (list of types seperated by spaces, but also repeated by commas, e.g. &#39;string int,...&#39;)</span>
<span class="sd">        </span>
<span class="sd">        Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt; Type.value(&#39;foo&#39;, &#39;string&#39;)</span>
<span class="sd">        &#39;foo&#39;</span>
<span class="sd">        &gt;&gt; Type.value(&#39;2.5&#39;, &#39;float&#39;)</span>
<span class="sd">        2.5</span>
<span class="sd">        &gt;&gt; Type.value(&#39;5&#39;, &#39;int&#39;)</span>
<span class="sd">        5</span>
<span class="sd">        &gt;&gt; Type.value(&#39;text 5&#39;, &#39;string int&#39;)</span>
<span class="sd">        [&#39;text&#39;, 5]</span>
<span class="sd">        &gt;&gt; Type.value(&#39;0.5 2.2,-2.5 5.2&#39;, &#39;float float,...&#39;)</span>
<span class="sd">        [[0.5,2.2],[-2.5,5.2]]</span>
<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">def</span> <span class="nf">getint</span><span class="p">(</span><span class="n">value</span> <span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="mi">0</span>
        
        <span class="k">def</span> <span class="nf">getfloat</span><span class="p">(</span><span class="n">value</span> <span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="mf">0.0</span>
        
        <span class="n">types</span> <span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;string&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
            <span class="s1">&#39;float&#39;</span> <span class="p">:</span> <span class="n">getfloat</span><span class="p">,</span>
            <span class="s1">&#39;int&#39;</span> <span class="p">:</span> <span class="n">getint</span><span class="p">,</span>
            <span class="s1">&#39;bit&#39;</span> <span class="p">:</span> <span class="n">getint</span><span class="p">,</span>
        <span class="p">}</span>
        
        <span class="n">arrays</span> <span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;comma&#39;</span> <span class="p">:</span> <span class="k">lambda</span> <span class="n">string</span> <span class="p">:</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">),</span>
            <span class="s1">&#39;spaced&#39;</span> <span class="p">:</span> <span class="k">lambda</span> <span class="n">string</span> <span class="p">:</span> <span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(),</span>
        <span class="p">}</span>
        
        <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="k">for</span> <span class="n">array</span> <span class="ow">in</span> <span class="n">arrays</span><span class="p">:</span>
            <span class="n">array_types</span> <span class="o">=</span> <span class="n">arrays</span><span class="p">[</span><span class="n">array</span><span class="p">](</span><span class="nb">type</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">array_types</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">values</span> <span class="o">=</span> <span class="n">arrays</span><span class="p">[</span><span class="n">array</span><span class="p">](</span><span class="n">value</span><span class="p">)</span>
                <span class="n">new_values</span> <span class="o">=</span> <span class="p">[]</span>
                
                <span class="n">type_index</span> <span class="o">=</span> <span class="mi">0</span>
                
                <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">array_types</span><span class="p">[</span><span class="n">type_index</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;...&#39;</span><span class="p">:</span>
                        <span class="n">type_index</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="n">new_values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">value</span> <span class="o">=</span> <span class="n">val</span><span class="p">,</span> <span class="nb">type</span> <span class="o">=</span> <span class="n">array_types</span><span class="p">[</span><span class="n">type_index</span><span class="p">]))</span>
                    
                    <span class="n">type_index</span> <span class="o">+=</span> <span class="mi">1</span>
                
                <span class="k">return</span> <span class="n">new_values</span>
        
        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">types</span><span class="p">[</span><span class="s1">&#39;string&#39;</span><span class="p">])(</span><span class="n">value</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="Type.ready_properties"><a class="viewcode-back" href="../../../../wmwpy.classes.objectpack.html#wmwpy.classes.objectpack.type.Type.ready_properties">[docs]</a>    <span class="k">def</span> <span class="nf">ready_properties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">include</span> <span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ready the properties before they are put into the level xml. By default, properties that are equal to their default property counterpart are removed, except &#39;Type&#39;, &#39;Angle&#39;, and &#39;Filename&#39;.</span>

<span class="sd">        Args:</span>
<span class="sd">            include (list[str], optional): List of properties to always keep. Defaults to [].</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict[str,str]: The new properties.</span>
<span class="sd">        </span>
<span class="sd">        To use this inside a custom Type, just call the super() with the include argument.</span>
<span class="sd">        ```python</span>
<span class="sd">        from wmwpy.classes.objectpacks import Type</span>
<span class="sd">        </span>
<span class="sd">        class fluidconverter(Type):</span>
<span class="sd">            NAME = &#39;fluidconverter&#39;</span>
<span class="sd">            </span>
<span class="sd">            def ready_properties(self):</span>
<span class="sd">                return super().ready_properties(include = [</span>
<span class="sd">                    &#39;FluidType&#39;,</span>
<span class="sd">                    &#39;FluidType#&#39;,</span>
<span class="sd">                    &#39;StartingFluidType&#39;,</span>
<span class="sd">                    &#39;ConverterType&#39;,</span>
<span class="sd">                ])</span>
<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">properties</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">properties</span><span class="p">)</span>
        
        <span class="n">include</span> <span class="o">+=</span> <span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">,</span> <span class="s1">&#39;Angle&#39;</span><span class="p">,</span> <span class="s1">&#39;Filename&#39;</span><span class="p">]</span>
        
        <span class="k">for</span> <span class="nb">property</span> <span class="ow">in</span> <span class="n">properties</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">property</span> <span class="ow">in</span> <span class="n">include</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">include</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">):</span>
                    <span class="n">split_property</span> <span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">split_property_num</span><span class="p">(</span><span class="nb">property</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">split_property</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">split_property</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">isnumeric</span><span class="p">():</span>
                        <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="nb">property</span><span class="p">:</span>
                            <span class="k">continue</span>
                        <span class="k">elif</span> <span class="n">split_property</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">isnumeric</span><span class="p">():</span>
                            <span class="k">if</span> <span class="n">split_property</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;#&#39;</span> <span class="o">==</span> <span class="n">prop</span><span class="p">:</span>
                                <span class="k">continue</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">prop</span> <span class="o">==</span> <span class="nb">property</span><span class="p">:</span>
                        <span class="k">continue</span>
            
            <span class="k">if</span> <span class="nb">property</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">defaultProperties</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="nb">property</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">defaultProperties</span><span class="p">[</span><span class="nb">property</span><span class="p">]:</span>
                    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="nb">property</span><span class="p">]</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">properties</span></div>

<div class="viewcode-block" id="Type.get_property"><a class="viewcode-back" href="../../../../wmwpy.classes.objectpack.html#wmwpy.classes.objectpack.type.Type.get_property">[docs]</a>    <span class="k">def</span> <span class="nf">get_property</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">property</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the property from the object. If the object doesn&#39;t have the property it looks for the default property, then on the Type object itself.</span>

<span class="sd">        Args:</span>
<span class="sd">            property (str): The name of the property.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str | float | int | list[str | float | int], list[list[str | float | int]]: The resulting value as python built-in data type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="n">Object</span><span class="p">):</span>
            <span class="n">prop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PROPERTIES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="nb">property</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_PROPERTY</span>
            <span class="p">)</span>
            
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
            
            <span class="k">if</span> <span class="s1">&#39;default&#39;</span> <span class="ow">in</span> <span class="n">prop</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">prop</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span>
                <span class="nb">type</span> <span class="o">=</span> <span class="n">prop</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
                
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
            
            <span class="k">return</span> <span class="n">result</span>
        
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="nb">property</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">defaultProperties</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="nb">property</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PROPERTIES</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="nb">property</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_PROPERTY</span>
                <span class="p">)[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">property</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">PROPERTIES</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">(</span>
                <span class="n">value</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">PROPERTIES</span><span class="p">[</span><span class="nb">property</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span>
            <span class="p">)</span>
        
        <span class="k">return</span> <span class="n">value</span></div></div>
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../index.html">wmwpy</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../index.html">Module code</a><ul>
  <li><a href="../../../wmwpy.html">wmwpy</a><ul>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2023, ego-lay-atman-bay.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 6.2.1</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
    </div>

    

    
  </body>
</html>